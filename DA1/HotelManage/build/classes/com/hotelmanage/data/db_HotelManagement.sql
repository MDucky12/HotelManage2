create database HotelManagement
go
use HotelManagement
go
--NGƯỜI DÙNG
CREATE TABLE tb_User
(
    IDUser NVARCHAR(10) PRIMARY KEY NOT NULL,
	StaffName NVARCHAR(100) NOT NULL,
	Birth Date NOT NULL,
    Username NVARCHAR(50) NOT NULL,
    Pass NVARCHAR(50) NOT NULL,
	Role BIT NOT NULL,
	Note NVARCHAR(300)
)
GO
--KHÁCH HÀNG
CREATE TABLE tb_Customer
(
	IDCus INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	Name NVARCHAR(100) NOT NULL,
	Phone NVARCHAR(12),
	Email NVARCHAR(50),
	Identify NVARCHAR(20)
)
GO
--PHÒNG
CREATE TABLE tb_Room 
(
    IDRoom NVARCHAR(10) PRIMARY KEY NOT NULL,
    Statuss BIT NOT NULL,
	RoomFloor INT NOT NULL,
	RoomType INT NOT NULL,
	RoomPrice FLOAT NOT NULL
)
GO
--DỊCH VỤ
CREATE TABLE tb_Service
(
	IDService INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	NameService NVARCHAR(100),
	Price FLOAT
)
GO
--TÀI SẢN CHUNG
CREATE TABLE tb_Property
(
	IDProp NVARCHAR(10) PRIMARY KEY NOT NULL,
	PropName NVARCHAR(100),
	Price FLOAT
)
GO
--BILL ( NGƯỜI DÙNG QUẢN LÝ KHÁCH HÀNG ĐANG SỬ DỤNG PHÒNG )
CREATE TABLE tb_Bill
(
	IDBill INT NOT NULL PRIMARY KEY,
	IDCus  INT NOT NULL FOREIGN KEY REFERENCES tb_Customer(IDCus),
	IDRoom NVARCHAR(10) NOT NULL FOREIGN KEY REFERENCES tb_Room(IDRoom),
	IDUser NVARCHAR(10) NOT NULL FOREIGN KEY REFERENCES tb_User(IDUser),
	CheckInDay datetime,
	CheckOutDay datetime,
	Amount INT
)
GO
--DỊCH VỤ PHÒNG
CREATE TABLE tb_RoomService
(
	IDBill INT NOT NULL FOREIGN KEY REFERENCES tb_Bill(IDBill),
	IDService INT NOT NULL FOREIGN KEY REFERENCES tb_Service(IDService),
	PRIMARY KEY (IDService, IDBill),
	Statuss BIT NOT NULL
)
GO
--TÀI SẢN PHÒNG
CREATE TABLE tb_RoomProp
(
	IDBill INT NOT NULL FOREIGN KEY REFERENCES tb_Bill(IDBill),
	IDProp NVARCHAR(10) NOT NULL FOREIGN KEY REFERENCES tb_Property(IDProp),
	PRIMARY KEY (IDBill,IDProp),
	isBroke BIT NOT NULL
)
GO
